<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vex â€” The Ultimate Roblox Script</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <style>
        @layer base {
            body {
                font-family: 'Inter', sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                background-color: #000;
                overflow-x: hidden;
            }
        }
        
        @layer components {
            .glass-effect {
                background-color: rgba(17, 17, 17, 0.5);
                backdrop-filter: blur(24px);
                -webkit-backdrop-filter: blur(24px);
                border: 1px solid rgba(255, 255, 255, 0.05);
                position: relative;
            }

            .feature-card {
                --glow-color: rgba(0, 113, 227, 0.5);
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }

            .feature-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            }
            .feature-card::before {
                content: '';
                position: absolute;
                top: 0; left: 0; right: 0; bottom: 0;
                border-radius: inherit;
                box-shadow: 0 0 60px 15px var(--glow-color);
                opacity: 0;
                transition: opacity 0.4s ease;
                z-index: -1;
            }

            .feature-card:hover::before {
                opacity: 1;
            }
            
            .get-script-btn-hero {
                background: linear-gradient(135deg, #0071e3, #00a3ff);
                border: 1px solid rgba(120, 150, 255, 0.3);
                color: white;
                padding: 1.5rem;
                border-radius: 1.75rem;
                transition: all 0.3s ease;
                box-shadow: 0 8px 30px rgba(0, 120, 255, 0.3);
                display: inline-flex;
                align-items: center;
                justify-content: center;
                font-size: 3rem;
                width: 140px; 
                height: 140px;
            }

            .get-script-btn-hero:hover {
                box-shadow: 0 12px 40px rgba(0, 120, 255, 0.5);
                transform: translateY(-6px) scale(1.05);
            }

            .get-script-icon {
                width: 1em;
                height: 1em;
            }
            
            .blue-btn {
                background: #0071e3;
                color: white;
                font-weight: 600;
                padding: 0.75rem 1.5rem;
                border-radius: 9999px;
                transition: all 0.3s ease;
            }
            .blue-btn:hover {
                background: #147ce5;
                transform: translateY(-2px);
            }

            .code-text {
                font-family: 'SF Mono', 'Menlo', 'Monaco', monospace;
                white-space: pre-wrap;
                font-size: 0.8rem;
                line-height: 1.6;
                background-color: rgba(0,0,0,0.3);
                padding: 1rem;
                border-radius: 0.75rem;
                max-height: 400px;
                overflow-y: auto;
            }
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 15% 50%, #0052FF 0%, rgba(0,0,0,0) 25%),
                        radial-gradient(circle at 85% 30%, #5800FF 0%, rgba(0,0,0,0) 25%),
                        radial-gradient(circle at 50% 80%, #00A3FF 0%, rgba(0,0,0,0) 20%);
            z-index: -1;
            animation: animateAurora 20s infinite linear;
            opacity: 0.3;
        }

        @keyframes animateAurora {
            0% { transform: rotate(0deg) scale(1.5); }
            50% { transform: rotate(180deg) scale(2); }
            100% { transform: rotate(360deg) scale(1.5); }
        }
        
        #hero-content {
            animation: fade-out-scale-down linear;
            animation-timeline: scroll(root);
            animation-range: 0 50vh;
        }
        @keyframes fade-out-scale-down {
            to { opacity: 0; transform: scale(0.9) translateY(-50px); }
        }
        
        .view-animate {
            animation: fade-in-up linear;
            animation-timeline: view(block);
            animation-range: entry 25% cover 50%;
            animation-fill-mode: both;
        }

        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(60px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .gradient-text {
            background: linear-gradient(90deg, #87CEEB, #ADD8E6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .loader {
            width: 24px; height: 24px;
            border: 3px solid #FFF;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .text-balance { text-wrap: balance; }
    </style>
</head>
<body class="bg-black text-gray-300">

    <header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 glass-effect">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-xl font-bold text-white flex items-center space-x-2" data-magnetic>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                <span>Vex</span>
            </a>
            <nav class="hidden md:flex space-x-4 items-center">
                <a href="#features" class="text-gray-300 hover:text-white transition-colors px-4 py-2" data-magnetic>Features</a>
                <a href="#backend" class="text-gray-300 hover:text-white transition-colors px-4 py-2" data-magnetic>The Script</a>
                <a href="#vex-ai" class="text-gray-300 hover:text-white transition-colors px-4 py-2" data-magnetic>Vex AI</a>
                <button id="get-script-btn-nav" class="blue-btn" data-magnetic>
                    <span>Get Script</span>
                </button>
            </nav>
            <button class="md:hidden text-white" data-magnetic>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
        </div>
    </header>

    <main>
        <section class="h-[150vh] flex items-start justify-center text-center bg-transparent pt-48 sticky top-0">
            <div class="container mx-auto px-6" id="hero-content">
                <div class="max-w-4xl mx-auto">
                    <h1 class="text-5xl md:text-7xl lg:text-8xl font-extrabold text-white leading-tight mb-6">
                        Unlock the power of <span class="gradient-text">Vex</span>.
                        <br>
                        Unrivaled control.
                    </h1>
                    <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto mb-10 text-balance">
                        The most advanced open-source script for Roblox. Seamlessly integrated, intuitively designed, and powerfully simple.
                    </p>
                    <div class="flex flex-col items-center">
                        <button id="get-script-btn-hero" class="get-script-btn-hero" data-magnetic>
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="get-script-icon">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                        </button>
                        <p id="copy-message" class="mt-6 text-gray-400 opacity-0 transition-opacity duration-300">Click to copy script!</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="relative z-10 bg-black">
            <section class="py-20">
                <div class="container mx-auto px-6 text-center">
                    <div class="max-w-4xl mx-auto glass-effect rounded-3xl p-10 view-animate">
                        <h2 class="text-3xl font-bold text-white mb-4 text-balance">Unleash the True Potential of Roblox</h2>
                        <p class="text-gray-400 text-lg text-balance">
                            Vex provides a comprehensive suite of powerful features designed to give you ultimate control in any Roblox experience. It offers seamless integration and an intuitive interface, making it easy to master your gameplay. With built-in anti-cheat measures and performance optimizations, Vex ensures a smooth and reliable experience.
                        </p>
                    </div>
                </div>
            </section>

            <section id="features" class="py-20">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl md:text-5xl font-bold text-white view-animate text-balance">Engineered for Excellence.</h2>
                    </div>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="text-center p-8 rounded-3xl glass-effect feature-card view-animate">
                            <div class="flex items-center justify-center h-20 w-20 rounded-2xl bg-gray-900 border border-gray-800 mx-auto mb-6">
                                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-white mb-3 text-balance">Modular Architecture</h3>
                            <p class="text-gray-400">Clean, organized code with separate modules for core logic, ensuring stability and easy updates.</p>
                        </div>
                        <div class="text-center p-8 rounded-3xl glass-effect feature-card view-animate" style="animation-delay: 0.2s;">
                            <div class="flex items-center justify-center h-20 w-20 rounded-2xl bg-gray-900 border border-gray-800 mx-auto mb-6">
                                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-white mb-3 text-balance">Dynamic Configuration</h3>
                            <p class="text-gray-400">Easily manage exemptions and invincibility with a centralized configuration table. No code-digging required.</p>
                        </div>
                        <div class="text-center p-8 rounded-3xl glass-effect feature-card view-animate" style="animation-delay: 0.4s;">
                            <div class="flex items-center justify-center h-20 w-20 rounded-2xl bg-gray-900 border border-gray-800 mx-auto mb-6">
                                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>
                            </div>
                            <h3 class="text-2xl font-semibold text-white mb-3 text-balance">Robust Performance</h3>
                            <p class="text-gray-400">Built with modern, efficient practices to ensure minimal performance impact on any game.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="backend" class="py-20">
                <div class="container mx-auto px-6">
                     <div class="text-center mb-16">
                        <h2 class="text-4xl md:text-5xl font-bold text-white view-animate text-balance">The Complete Script.</h2>
                        <p class="text-lg md:text-xl text-gray-400 mt-4 max-w-3xl mx-auto text-balance view-animate" style="animation-delay: 0.2s;">
                            Vex is fully open-source. Below is the complete, un-obfuscated code. What you see is what you getâ€”powerful, clean, and ready to run.
                        </p>
                    </div>
                    <div class="max-w-4xl mx-auto view-animate" style="animation-delay: 0.4s;">
                        <div class="bg-gray-900/50 p-2 rounded-2xl glass-effect">
                            <div class="flex items-center p-4">
                                <div class="flex space-x-2">
                                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                </div>
                                <span class="ml-auto text-gray-500 text-sm">Vex.lua</span>
                            </div>
                            <pre id="vex-script-display" class="code-text"></pre>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="vex-ai" class="py-20">
                <div class="container mx-auto px-6 text-center">
                    <div class="max-w-3xl mx-auto">
                        <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 view-animate text-balance">Have a question?</h2>
                        <p class="text-lg md:text-xl text-gray-400 mb-10 view-animate" style="animation-delay: 0.2s;">
                            Ask our AI anything about the Vex script.
                        </p>
                        <div class="glass-effect p-8 rounded-3xl view-animate" style="animation-delay: 0.4s;">
                            <div class="flex flex-col md:flex-row gap-4 mb-6">
                                <input type="text" id="ai-prompt" placeholder="e.g., How do I add a new admin?" class="w-full bg-gray-900/50 text-white placeholder-gray-500 px-5 py-3 rounded-full border border-transparent focus:border-blue-500 focus:ring-0 transition-all">
                                <button id="ask-ai-btn" class="blue-btn px-8 py-3 flex items-center justify-center space-x-2">
                                    <span>âœ¨ Ask Vex AI</span>
                                </button>
                            </div>
                            <div id="vex-ai-response" class="text-left p-6 bg-black/20 rounded-2xl text-gray-300 min-h-[100px]">
                                Ask a question to see the AI's response here.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="glass-effect border-t-0 mt-20">
        <div class="container mx-auto px-6 py-12">
            <div class="grid md:grid-cols-4 gap-8 text-gray-400">
                <div>
                    <h4 class="font-semibold text-white mb-4">Vex</h4>
                    <p>The Ultimate Roblox Script</p>
                </div>
                <div>
                    <h4 class="font-semibold text-white mb-4">Product</h4>
                    <ul>
                        <li class="mb-2"><a href="#features" class="hover:text-white">Features</a></li>
                        <li class="mb-2"><a href="#backend" class="hover:text-white">The Script</a></li>
                        <li class="mb-2"><a href="#vex-ai" class="hover:text-white">Vex AI</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-white mb-4">Community</h4>
                    <ul>
                        <li class="mb-2"><a href="#" class="hover:text-white">Coming Soon!</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-white mb-4">Legal</h4>
                    <ul>
                        <li class="mb-2"><a href="#" id="privacy-policy-link" class="hover:text-white cursor-pointer">Privacy Policy</a></li>
                        <li class="mb-2"><a href="#" id="tos-link" class="hover:text-white cursor-pointer">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-800 pt-8 text-center text-sm text-gray-500">
                <p>&copy; 2025 Vex Inc. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Legal Modal -->
    <div id="legal-modal" class="fixed inset-0 z-[100] flex items-center justify-center p-4 hidden transition-opacity duration-300 opacity-0">
        <div id="legal-modal-overlay" class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
        <div id="legal-modal-panel" class="relative w-full max-w-3xl glass-effect rounded-2xl p-8 text-gray-300 transform transition-all opacity-0 scale-95 duration-300">
            <div class="flex justify-between items-center mb-6">
                <h3 id="legal-modal-title" class="text-2xl font-bold text-white"></h3>
                <button id="legal-modal-close" class="text-gray-400 hover:text-white transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="legal-modal-content" class="prose prose-invert prose-p:text-gray-400 prose-headings:text-white max-h-[70vh] overflow-y-auto pr-4">
            </div>
        </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // --- THE FULL VEX SCRIPT FOR DISPLAY AND COPYING ---
            const vexScriptText = `--[[--[[
__Â  Â  Â __Â  Â  Â  Â  ___Â Â 
\ \Â  Â / /____Â  _( _ )Â 
Â \ \ / / _ \ \/ / _ \Â 
Â  \ V /Â  __/>Â  < (_) |
Â  Â \_/ \___/_/\_\___/Â  Â 
	Project: Vex8 - Universal Anti-Death & Player Management
	Author: StrikeXRR
	Version: 8.0
	Description:
	- A modular system for handling player death behavior.
--]]

--//========================= SERVICES =========================\--
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")

--//===================== CONFIGURATION ======================\--
-- Configuration values for customizing script behavior.
-- All values can be modified at runtime.

local Config = {
	-- Toggles debug logging for development and troubleshooting.
	DebugMode = false,
	-- The message displayed to players who are kicked upon death.
	KickMessage = "You died! Rejoin to try again.",

	-- Players in this table will NOT be kicked upon death.
	-- Add UserIds.
	Exemptions = {
		[12345678] = true, -- Example UserId
	},
	
	-- Only players on this list can access the admin panel.
	-- Add your own User ID here to access the panel in-game.
	Admins = {
		1234567890, -- Replace with your User ID
		0987654321,
	},
}

--//====================== UTILITY FUNCTIONS ======================\--
-- Helper functions for common operations.

-- Prints a message to the console only if DebugMode is enabled.
local function LogDebug(...)
	if Config.DebugMode then
		print("[Vex8 DEBUG]:", ...)
	end
end

-- Normalizes a player's name for case-insensitive checks.
local function NormalizeName(name: string): string
	return string.lower(name)
end

-- Checks if a player is in the exemptions table.
local function IsExempt(player: Player): boolean
	return Config.Exemptions[player.UserId]
end

-- Handles the logic for a player's death.
local function HandlePlayerDeath(player: Player)
	if not IsExempt(player) then
		LogDebug(player.Name, "is not exempt, kicking...")
		player:Kick(Config.KickMessage)
	else
		LogDebug(player.Name, "is exempt, not kicking.")
	end
end

--//====================== REMOTE EVENT SETUP ======================\--
-- Create the RemoteEvent to communicate from the client GUI to the server.
local AdminEvent = Instance.new("RemoteEvent")
AdminEvent.Name = "Vex8AdminEvent"
AdminEvent.Parent = ReplicatedStorage

-- Handle incoming requests from the admin panel.
AdminEvent.OnServerEvent:Connect(function(player, action, targetName, targetId)
	if not table.find(Config.Admins, player.UserId) then
		warn("Vex8: Unauthorized admin access attempt from", player.Name)
		return
	end

	-- Find the target player by name or ID
	local targetPlayer = Players:GetPlayerByUserId(targetId) or Players:FindFirstChild(targetName)
	if not targetPlayer then
		LogDebug("Target player not found:", targetName or targetId)
		return
	end

	if action == "ToggleExemption" then
		if Config.Exemptions[targetPlayer.UserId] then
			Config.Exemptions[targetPlayer.UserId] = nil
			LogDebug("Removed exemption for", targetPlayer.Name)
		else
			Config.Exemptions[targetPlayer.UserId] = true
			LogDebug("Added exemption for", targetPlayer.Name)
		end
	elseif action == "KickPlayer" then
		targetPlayer:Kick(Config.KickMessage)
		LogDebug("Kicked", targetPlayer.Name)
	elseif action == "ToggleDebug" then
		Config.DebugMode = not Config.DebugMode
		LogDebug("Debug mode is now", tostring(Config.DebugMode))
	end
end)


--//====================== GUI CREATION (CLIENT-SIDE) ======================\--
-- A string containing the entire LocalScript code.
local guiScriptCode = [[
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local AdminEvent = ReplicatedStorage:WaitForChild("Vex8AdminEvent")
local LocalPlayer = Players.LocalPlayer

-- Check if the player is an admin
local function IsAdmin()
	-- The server will handle the actual check, this is just for UI purposes
	local admins = {
		-- This list must match the one in the main script for the GUI to appear
		-- Replace with your admin IDs
		1234567890,
		0987654321,
	}
	return table.find(admins, LocalPlayer.UserId)
end

if not IsAdmin() then
	return
end

-- Wait for the PlayerGui to be ready
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Helper function to create a UI element
local function createUI(instanceType, parent, props, children)
	local instance = Instance.new(instanceType)
	for prop, value in pairs(props) do
		instance[prop] = value
	end
	instance.Parent = parent

	if children then
		for _, child in ipairs(children) do
			createUI(child.type, instance, child.props, child.children)
		end
	end

	return instance
end

-- Function to tween a UI element's transparency and position
local function tweenUI(element, isVisible)
	local tweenInfo = TweenInfo.new(
		0.3,
		Enum.EasingStyle.Sine,
		Enum.EasingDirection.Out
	)
	local targetPosition = isVisible and UDim2.new(0.5, 0, 0.5, 0) or UDim2.new(0.5, 0, 1.5, 0)
	local targetTransparency = isVisible and 0 or 1

	TweenService:Create(element, tweenInfo, {
		BackgroundTransparency = targetTransparency,
		Position = targetPosition
	}):Play()
end

-- Function to refresh the displayed lists
local function refreshLists()
	local exemptList = PlayerGui.Vex8AdminGui.MainFrame.ExemptionsFrame.ListContainer

	for _, child in ipairs(exemptList:GetChildren()) do
		if child:IsA("TextLabel") then child:Destroy() end
	end
	
	-- Ask the server for the current lists
	AdminEvent:FireServer("GetLists")
end

-- Create the main ScreenGui
local screenGui = createUI("ScreenGui", PlayerGui, {
	Name = "Vex8AdminGui",
	ResetOnSpawn = false
})

-- Create the main frame
local mainFrame = createUI("Frame", screenGui, {
	Name = "MainFrame",
	AnchorPoint = Vector2.new(0.5, 0.5),
	Size = UDim2.new(0, 500, 0, 450),
	Position = UDim2.new(0.5, 0, 1.5, 0), -- Start off-screen
	BackgroundTransparency = 1,
	BackgroundColor3 = Color3.fromRGB(240, 240, 245),
})

-- Add a UICorner for rounded edges
createUI("UICorner", mainFrame, {
	CornerRadius = UDim.new(0, 16)
})

-- Add a UIStroke for a subtle border
createUI("UIStroke", mainFrame, {
	Color = Color3.fromRGB(200, 200, 200),
	Transparency = 0.5,
	Thickness = 1,
	ApplyStrokeMode = Enum.ApplyStrokeMode.Border
})

-- Top Bar
local topBar = createUI("Frame", mainFrame, {
	Name = "TopBar",
	Size = UDim2.new(1, 0, 0, 40),
	BackgroundTransparency = 1
})

-- Dragging functionality
local dragging
local dragStart
topBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		mainFrame:GetChildren().Title.TextTransparency = 0.5 -- Subtle effect
	end
end)

topBar.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
		mainFrame:GetChildren().Title.TextTransparency = 0 -- Reset effect
	end
end)

RunService.RenderStepped:Connect(function()
	if dragging then
		local delta = game:GetService("UserInputService"):GetMouseLocation() - dragStart
		mainFrame.Position = mainFrame.Position + UDim2.fromOffset(delta.X, delta.Y)
		dragStart = game:GetService("UserInputService"):GetMouseLocation()
	end
end)


-- Title Label
local titleLabel = createUI("TextLabel", mainFrame, {
	Name = "Title",
	Size = UDim2.new(1, 0, 0, 40),
	Text = "Vex8 Admin Panel",
	TextColor3 = Color3.fromRGB(50, 50, 50),
	Font = Enum.Font.GothamBold,
	TextSize = 18,
	BackgroundTransparency = 1
})

-- Close Button
local closeButton = createUI("TextButton", topBar, {
	Name = "CloseButton",
	Size = UDim2.new(0, 30, 0, 30),
	Position = UDim2.new(1, -40, 0.5, -15),
	Text = "âœ•",
	TextColor3 = Color3.fromRGB(150, 150, 150),
	Font = Enum.Font.SourceSans,
	TextSize = 24,
	BackgroundTransparency = 1
})

closeButton.MouseButton1Click:Connect(function()
	tweenUI(mainFrame, false)
end)

-- Main content frame
local contentFrame = createUI("Frame", mainFrame, {
	Size = UDim2.new(1, 0, 1, -40),
	Position = UDim2.new(0, 0, 0, 40),
	BackgroundTransparency = 1
})

-- Main layout
createUI("UIListLayout", contentFrame, {
	Padding = UDim.new(0, 10),
	SortOrder = Enum.SortOrder.LayoutOrder,
	HorizontalAlignment = Enum.HorizontalAlignment.Center,
	FillDirection = Enum.FillDirection.Vertical,
	VerticalAlignment = Enum.VerticalAlignment.Top
})

-- Section for Player Management
local playerFrame = createUI("Frame", contentFrame, {
	Name = "PlayerManagement",
	Size = UDim2.new(0.95, 0, 0.15, 0),
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	LayoutOrder = 1,
	BackgroundTransparency = 0.5
})
createUI("UICorner", playerFrame, { CornerRadius = UDim.new(0, 10) })

local playerLayout = createUI("UIListLayout", playerFrame, {
	Padding = UDim.new(0, 5),
	SortOrder = Enum.SortOrder.LayoutOrder,
	FillDirection = Enum.FillDirection.Vertical,
	HorizontalAlignment = Enum.HorizontalAlignment.Center,
	VerticalAlignment = Enum.VerticalAlignment.Top
})
createUI("UIPadding", playerFrame, {
	PaddingTop = UDim.new(0, 10),
	PaddingBottom = UDim.new(0, 10)
})

createUI("TextLabel", playerFrame, {
	Text = "Player Management",
	TextColor3 = Color3.fromRGB(50, 50, 50),
	Font = Enum.Font.GothamBold,
	TextSize = 16,
	BackgroundTransparency = 1,
	Size = UDim2.new(1, 0, 0, 20)
})

local playerInput = createUI("TextBox", playerFrame, {
	Name = "PlayerInput",
	PlaceholderText = "Enter Player Name or ID",
	Size = UDim2.new(0.95, 0, 0, 30),
	Text = "",
	BackgroundColor3 = Color3.fromRGB(230, 230, 235),
	TextColor3 = Color3.fromRGB(50, 50, 50),
	TextSize = 14,
	Font = Enum.Font.SourceSans,
	BackgroundTransparency = 0.5
})
createUI("UICorner", playerInput, { CornerRadius = UDim.new(0, 8) })

local buttonLayout = createUI("UIListLayout", playerFrame, {
	Padding = UDim.new(0, 5),
	SortOrder = Enum.SortOrder.LayoutOrder,
	FillDirection = Enum.FillDirection.Horizontal,
	HorizontalAlignment = Enum.HorizontalAlignment.Center,
	VerticalAlignment = Enum.VerticalAlignment.Center
})
buttonLayout.Parent = playerInput.Parent -- Attach to the same parent

local exemptionButton = createUI("TextButton", playerFrame, {
	Name = "ToggleExemptionButton",
	Text = "Toggle Exemption",
	Size = UDim2.new(0.48, 0, 0, 30),
	BackgroundTransparency = 0.8,
	BackgroundColor3 = Color3.fromRGB(70, 130, 180),
	TextColor3 = Color3.fromRGB(255, 255, 255),
	Font = Enum.Font.Gotham,
	TextSize = 14
})
createUI("UICorner", exemptionButton, { CornerRadius = UDim.new(0, 8) })

local kickButton = createUI("TextButton", playerFrame, {
	Name = "KickButton",
	Text = "Kick Player",
	Size = UDim2.new(0.48, 0, 0, 30),
	BackgroundTransparency = 0.8,
	BackgroundColor3 = Color3.fromRGB(200, 50, 50),
	TextColor3 = Color3.fromRGB(255, 255, 255),
	Font = Enum.Font.Gotham,
	TextSize = 14
})
createUI("UICorner", kickButton, { CornerRadius = UDim.new(0, 8) })

-- Function to handle button clicks
local function handleButtonClick(action)
	local target = playerInput.Text
	if target:len() > 0 then
		local isUserId = tonumber(target)
		AdminEvent:FireServer(action, target, isUserId and tonumber(target) or nil)
		playerInput.Text = "" -- Clear the input
	end
end

exemptionButton.MouseButton1Click:Connect(function() handleButtonClick("ToggleExemption") end)
kickButton.MouseButton1Click:Connect(function() handleButtonClick("KickPlayer") end)

-- Debug Mode Toggle
local debugFrame = createUI("Frame", contentFrame, {
	Name = "DebugToggle",
	Size = UDim2.new(0.95, 0, 0, 40),
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	LayoutOrder = 2,
	BackgroundTransparency = 0.5
})
createUI("UICorner", debugFrame, { CornerRadius = UDim.new(0, 10) })
local debugLayout = createUI("UIListLayout", debugFrame, {
	Padding = UDim.new(0, 5),
	SortOrder = Enum.SortOrder.LayoutOrder,
	FillDirection = Enum.FillDirection.Horizontal,
	HorizontalAlignment = Enum.HorizontalAlignment.Center,
	VerticalAlignment = Enum.VerticalAlignment.Center
})
createUI("TextLabel", debugFrame, {
	Size = UDim2.new(0.5, 0, 1, 0),
	Text = "Debug Mode:",
	TextColor3 = Color3.fromRGB(50, 50, 50),
	Font = Enum.Font.GothamBold,
	TextSize = 16,
	BackgroundTransparency = 1
})
local debugButton = createUI("TextButton", debugFrame, {
	Name = "ToggleDebugButton",
	Size = UDim2.new(0.4, 0, 0, 30),
	Text = "Toggle",
	BackgroundTransparency = 0.8,
	BackgroundColor3 = Color3.fromRGB(100, 100, 100),
	TextColor3 = Color3.fromRGB(255, 255, 255),
	Font = Enum.Font.Gotham,
	TextSize = 14
})
createUI("UICorner", debugButton, { CornerRadius = UDim.new(0, 8) })

debugButton.MouseButton1Click:Connect(function()
	AdminEvent:FireServer("ToggleDebug")
end)

-- The button to open the GUI.
local openButton = createUI("TextButton", PlayerGui, {
	Name = "OpenAdminPanelButton",
	Size = UDim2.new(0, 100, 0, 40),
	Position = UDim2.new(1, -110, 0, 10),
	Text = "Admin",
	Font = Enum.Font.GothamBold,
	TextSize = 16,
	TextColor3 = Color3.fromRGB(255, 255, 255),
	BackgroundTransparency = 0.2,
	BackgroundColor3 = Color3.fromRGB(50, 50, 50)
})
createUI("UICorner", openButton, { CornerRadius = UDim.new(0, 8) })

openButton.MouseButton1Click:Connect(function()
	tweenUI(mainFrame, true)
end)

-- This is a placeholder for a list, the server doesn't send the lists back.
-- A better solution would involve the server sending the updated tables back
-- to the client to display in the lists, but that's a more advanced feature.
-- For now, the user must look at the developer console for confirmation.
-- This part is here for future expansion.
local listsFrame = createUI("Frame", contentFrame, {
	Name = "ListsFrame",
	Size = UDim2.new(0.95, 0, 0.4, 0),
	BackgroundColor3 = Color3.fromRGB(255, 255, 255),
	LayoutOrder = 3,
	BackgroundTransparency = 0.5
})
createUI("UICorner", listsFrame, { CornerRadius = UDim.new(0, 10) })
createUI("TextLabel", listsFrame, {
	Name = "Placeholder",
	Size = UDim2.new(1, 0, 1, 0),
	Text = "Player lists can be displayed here in a future update.",
	Font = Enum.Font.SourceSans,
	TextSize = 14,
	TextWrapped = true,
	TextColor3 = Color3.fromRGB(150, 150, 150),
	BackgroundTransparency = 1
})
]]

-- Create and parent the LocalScript
local guiScript = Instance.new("LocalScript")
guiScript.Name = "Vex8AdminPanelScript"
guiScript.Source = guiScriptCode
guiScript.Parent = Players.LocalPlayer.PlayerScripts

--//===================== PLAYER MANAGEMENT ======================\--
-- Manages player-related events like character loading and death.

-- Handles events when a player's character is added.
local function OnCharacterAdded(player: Player, character: Model)
	local humanoid = character:WaitForChild("Humanoid", 5)
	if not humanoid then return end

	-- Connect the death handler.
	humanoid.Died:Connect(function()
		HandlePlayerDeath(player)
	end)
end

-- Handles events when a new player joins the game.
local function OnPlayerAdded(player: Player)
	-- Normalize names in the config tables to ensure consistency.
	local lowerName = NormalizeName(player.Name)
	if Config.Exemptions[player.Name] then
		Config.Exemptions[lowerName] = true
	end
	
	-- Connect to the CharacterAdded event.
	player.CharacterAdded:Connect(function(character)
		OnCharacterAdded(player, character)
	end)

	-- Handle cases where the character already exists on join.
	if player.Character then
		OnCharacterAdded(player, player.Character)
	end
end

--//======================= INITIALIZATION =======================\--
-- The main entry point of the script.

-- Process any players already in the game when the script starts.
for _, player in ipairs(Players:GetPlayers()) do
	OnPlayerAdded(player)
end

-- Connect to the PlayerAdded event to handle new joins.
Players.PlayerAdded:Connect(OnPlayerAdded)

LogDebug("Vex8 script initialized successfully.")`;
            
            // FIX: Populate script display directly.
            const scriptDisplayEl = document.getElementById('vex-script-display');
            if(scriptDisplayEl) {
                scriptDisplayEl.textContent = vexScriptText;
            }

            // --- MAGNETIC BUTTONS EFFECT ---
            document.querySelectorAll('[data-magnetic]').forEach(el => {
                el.addEventListener('mousemove', function(e) {
                    const position = el.getBoundingClientRect();
                    const x = e.clientX - position.left - position.width / 2;
                    const y = e.clientY - position.top - position.height / 2;
                    gsap.to(el, { x: x * 0.3, y: y * 0.3, duration: 0.7, ease: "elastic.out(1, 0.3)" });
                });
                el.addEventListener('mouseleave', function() {
                    gsap.to(el, { x: 0, y: 0, duration: 0.7, ease: "elastic.out(1, 0.3)" });
                });
            });

            // --- GET SCRIPT BUTTON: COPY TO CLIPBOARD ---
            const copyMessage = document.getElementById('copy-message');
            const copyHandler = (btnElement, isIconBtn = false) => {
                const originalContent = btnElement.innerHTML;
                navigator.clipboard.writeText(vexScriptText).then(() => {
                    if (isIconBtn) {
                        copyMessage.textContent = 'Copied!';
                        copyMessage.classList.remove('opacity-0');
                        setTimeout(() => copyMessage.classList.add('opacity-0'), 2000);
                    } else {
                        btnElement.innerHTML = '<span>Copied!</span>';
                        setTimeout(() => { btnElement.innerHTML = originalContent; }, 2000);
                    }
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                    if (isIconBtn) {
                        copyMessage.textContent = 'Failed to copy!';
                    } else {
                        btnElement.innerHTML = '<span>Failed!</span>';
                    }
                });
            };

            document.getElementById('get-script-btn-nav').addEventListener('click', (e) => copyHandler(e.currentTarget));
            document.getElementById('get-script-btn-hero').addEventListener('click', (e) => copyHandler(e.currentTarget, true));

            // --- LEGAL MODAL LOGIC ---
            const modal = document.getElementById('legal-modal');
            const modalOverlay = document.getElementById('legal-modal-overlay');
            const modalTitle = document.getElementById('legal-modal-title');
            const modalContent = document.getElementById('legal-modal-content');
            const modalCloseBtn = document.getElementById('legal-modal-close');
            const modalPanel = document.getElementById('legal-modal-panel');

            const tosText = `<h2>Terms of Service</h2>
<p>Welcome to the Vex community. These Terms of Service ("Terms") govern your use of the Vex Lua script ("the Script"). By using the Script, you agree to be bound by these Terms. If you do not agree to these Terms, you may not use the Script.</p>

<h3>Use and License</h3>
<p>Vex is an open-source Lua script provided for educational and personal use within the Roblox platform. You are granted a limited, non-exclusive, non-transferable license to use the Script for your personal enjoyment. This means you can use it, but you do not own it.</p>

<h3>Prohibited Actions</h3>
<p>You <strong>must not</strong>:</p>
<ul>
<li><p>Sell, redistribute, or re-upload the Script or its contents.</p></li>
<li><p>Claim ownership of the Script.</p></li>
<li><p>Use the Script for malicious purposes such as disrupting gameplay for others or exploiting a Roblox game's mechanics in a way that is not intended.</p></li>
</ul>

<h3>Disclaimer of Liability</h3>
<p>The Script is provided "as is" and without any warranties. The developers of Vex are not responsible for any actions taken against your Roblox account, including temporary bans or permanent termination, as a result of using this Script. You are solely responsible for your actions and use the Script at your own risk.</p>

<h2>Privacy Policy</h2>
<p>Vex does not collect any personal data or personally identifiable information from its users. The Script does not connect to any external servers or services. All of its functionality is self-contained within the Roblox game environment.</p>

<h3>Contact Us</h3>
<p>If you have any questions about this Privacy Policy, you can contact us through our official channels.</p>`;
            const privacyPolicyText = `<h2>Privacy Policy</h2><p>Your privacy is important to us. It is Vex's policy to respect your privacy regarding any information we may collect from you across our website.</p><p>We never ask for personal information. Only data is collected is Browser Version and Device Form</p><p>as well as unauthorized access, disclosure, copying, use or modification.</p><p>We donâ€™t share any personally identifying information publicly or with third-parties, except when required to by law.</p><p>Our website may link to external sites that are not operated by us. Please be aware that we have no control over the content and practices of these sites, and cannot accept responsibility or liability for their respective privacy policies.</p>`;

            function openModal(title, content) {
                modalTitle.textContent = title;
                modalContent.innerHTML = content;
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modalPanel.classList.remove('opacity-0', 'scale-95');
                }, 10);
            }

            function closeModal() {
                modalPanel.classList.add('opacity-0', 'scale-95');
                modal.classList.add('opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            document.getElementById('tos-link').addEventListener('click', (e) => {
                e.preventDefault();
                openModal('Terms of Service', tosText);
            });
            document.getElementById('privacy-policy-link').addEventListener('click', (e) => {
                e.preventDefault();
                openModal('Privacy Policy', privacyPolicyText);
            });
            modalCloseBtn.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', closeModal);

            // --- GEMINI API INTEGRATION ---
            const askAiBtn = document.getElementById('ask-ai-btn');
            const aiPromptInput = document.getElementById('ai-prompt');
            const aiResponseContainer = document.getElementById('vex-ai-response');

            const handleAiRequest = async () => {
                const userPrompt = aiPromptInput.value.trim();
                if (!userPrompt) return;

                askAiBtn.disabled = true;
                askAiBtn.innerHTML = '<span class="loader"></span>';
                aiResponseContainer.innerHTML = 'Generating response...';

                const productInfo = `You are Vex AI, a helpful assistant for the 'Vex' Roblox script (Version 8.0). Vex is an open-source script with features like a modular system for invincibility and anti-death, a dynamic configuration for exemptions and whitelists, and is written in modern, efficient Lua. Key features include kicking non-exempt players on death and providing unbreakable invincibility. Be concise, friendly, and focus on the script's capabilities.`;
                const fullPrompt = `${productInfo}\n\nUser question: "${userPrompt}"\n\nYour answer:`;

                try {
                    const payload = { contents: [{ role: "user", parts: [{ text: fullPrompt }] }] };
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`API error: ${response.status}`);
                    
                    const result = await response.json();
                    
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        aiResponseContainer.textContent = result.candidates[0].content.parts[0].text;
                    } else {
                        throw new Error('Invalid API response.');
                    }
                } catch (error) {
                    console.error("Gemini API Error:", error);
                    aiResponseContainer.textContent = 'Sorry, I had trouble connecting. Please try again.';
                } finally {
                    askAiBtn.disabled = false;
                    askAiBtn.innerHTML = '<span>âœ¨ Ask Vex AI</span>';
                }
            };

            askAiBtn.addEventListener('click', handleAiRequest);
            aiPromptInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleAiRequest();
                }
            });
        });
    </script>
</body>
</html>
